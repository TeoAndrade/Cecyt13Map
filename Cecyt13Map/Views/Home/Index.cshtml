@{
    ViewBag.Title = "Home Page";
    List<SelectListItem> ubi = (List<SelectListItem>)ViewBag.Items;
    
    Layout = "~/Views/Shared/_Layout.cshtml";
    
}

@section styles{
    <link href="~/Content/DataTables/css/buttons.dataTables.css" rel="stylesheet" />
    <link href="~/Content/DataTables/css/buttons.bootstrap4.css" rel="stylesheet" />
    <link href="~/Content/DataTables/css/dataTables.bootstrap4.css" rel="stylesheet" />
    <link href="~/Content/DataTables/css/fixedHeader.dataTables.css" rel="stylesheet" />
    <link href="~/Content/css/Estilo.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        thead input {
            width: 100%;
        }
    </style>
}
<body>
    
    <div class="container h-100">
        <div class="d-flex justify-content-end">
            <div class="mt-3">
                <div class="col-md-12">
                    <label>Seleccione el punto de partida</label>
                    @Html.DropDownList("datos", ubi, "Entrada de la Escuela", new { @class = "form-control p-0" })
                </div>
                <div class="col-md-12">
                    <label>Seleccione el punto de llegada</label>
                    @Html.DropDownList("datos", ubi, "Entrada de la Escuela", new { @class = "form-control p-0" })
                </div>
            </div>
        </div>
    </div>

    <article class="card-body section d-flex justify-content-center align-middle" style="margin:20px 200px">
        <canvas id="miLienzo" width="642" height="1223" style="border: 1px solid #c3c3c3; background: url('../../Content/img/Mapa oficial (4).png'); background-size: 100%; "></canvas>
    </article>
    <script>
        var ruta = document.getElementById("miLienzo");
        var coor = ruta.getContext("2d");
        coor.fillStyle = '#CCFF00';
        coor.fillRect(172, 1012, 5, 50);
        coor.fillRect(190, 1015, 50, 5);
        coor.fillRect(250, 1015, 50, 5);
        coor.fillRect(295, 955, 5, 50);
        coor.fillRect(295, 895, 5, 50);
        coor.fillRect(295, 895, 50, 5);
        coor.fillRect(355, 895, 50, 5);
        coor.fillRect(400, 880, 5, 10);
    </script>
    <script>
        var ruta = document.getElementById("miLienzo");
        var coor = ruta.getContext("2d");
        coor.fillStyle = '#00ffee';
        coor.arc(175, 1075, 10, 0, 2 * Math.PI, true);
        coor.fill();
    </script>
    <script>
        var ruta = document.getElementById("miLienzo");
        var fin = ruta.getContext("2d");
        fin.arc(400, 865, 10, 0, 2 * Math.PI, true);
        fin.fill();
    </script>
    <div class="card mr-5 mt-3 mb-2 ml-5">
        <div class="card-header">
            Edificio Central
        </div>
        <div class="card-body">
            <table id="example" class="display" style="width:100%">
                <thead>
                    <tr>
                        <th>Salones</th>
                        <th>Numero de piso</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <div class="d-flex flex-column">
        <h4 style="margin: 100px 200px 0px 200px;"><i>Edificio Central</i></h4>
        <hr style="margin: 5px 200px 0px 200px; border: 1px solid #921919;
        border-radius: 5px;">
    </div>
    <article class="card-body section d-flex justify-content-center align-middle" style="margin: 20px 200px 20px 200px;">
        <div class="d-flex flex-wrap">
            <div class="col-lg-3 col-md-4 col-6 col-sm mt-3 ">
                <a href="~/Content/img/Edificio central.jpg" class="fancylight popup-btn" data-fancybox-group="light">
                    <img src="~/Content/img/Edificio central.jpg" alt=" " class="img-fluid rounded float-left ">
                </a>
            </div>
            <div class="col-lg-3 col-md-4 col-6 col-sm mt-3 ">
                <a href="~/Content/img/Edificio central2.jpg" class="fancylight popup-btn" data-fancybox-group="light">
                    <img src="~/Content/img/Edificio central2.jpg" alt=" " class="img-fluid rounded float-left ">
                </a>
            </div>
            <div class="col-lg-3 col-md-4 col-6 col-sm mt-3 ">
                <a href="~/Content/img/Edificio central3.jpg" class="fancylight popup-btn" data-fancybox-group="light">
                    <img src="~/Content/img/Edificio central3.jpg" alt=" " class="img-fluid rounded float-left ">
                </a>
            </div>
            <div class="col-lg-3 col-md-4 col-6 col-sm mt-3 ">
                <a href="~/Content/img/Edificio central (1).jpeg" class="fancylight popup-btn" data-fancybox-group="light">
                    <img src="~/Content/img/Edificio central (1).jpeg" alt=" " class="img-fluid rounded float-left ">
                </a>
            </div>
            <div class="col-lg-3 col-md-4 col-6 col-sm mt-3 ">
                <a href="~/Content/img/Edificio central (2).jpeg" class="fancylight popup-btn" data-fancybox-group="light">
                    <img src="~/Content/img/Edificio central (2).jpeg" alt=" " class="img-fluid rounded float-left ">
                </a>
            </div>
            <div class="col-lg-3 col-md-4 col-6 col-sm mt-3 ">
                <a href="~/Content/img/Edificio central (3).jpeg" class="fancylight popup-btn" data-fancybox-group="light">
                    <img src="~/Content/img/Edificio central (3).jpeg" alt=" " class="img-fluid rounded float-left ">
                </a>
            </div>
            <div class="col-lg-3 col-md-4 col-6 col-sm mt-3 ">
                <a href="~/Content/img/Edificio central.jpeg" class="fancylight popup-btn" data-fancybox-group="light">
                    <img src="~/Content/img/Edificio central.jpeg" alt=" " class="img-fluid rounded float-left ">
                </a>
            </div>
        </div>

    </article>
</body>

@section scripts{
    <script src="~/Scripts/DataTables/jquery.dataTables.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="~/Scripts/DataTables/dataTables.buttons.js"></script>
    <script src="~/Scripts/DataTables/buttons.html5.js"></script>
    <script src="~/Scripts/DataTables/buttons.bootstrap4.js"></script>
    <script src="~/Scripts/DataTables/buttons.print.js"></script>
    <script src="~/Scripts/DataTables/dataTables.bootstrap4.js"></script>
    <script src="~/Scripts/DataTables/dataTables.fixedHeader.js"></script>


    <script>

        $(document).ready(function() {

            $('#example thead tr').clone(true).addClass('filters').appendTo('#example thead');


            $('#example').DataTable({
                //_______________PRIMERO____________
                "ajax": {
                    "url": '@Url.Action("Salones", "Home")',
                    "type": "GET",
                    "datatype": "json"
                },
                "columns": [
                    { "data": "Nom_Escuela" },
                    { "data": "Piso" }
                ],
                //________________ SEGUNDO ____________
                language:{
                    url:"https://cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"
                },
                //________________ TERCERO ____________
                //_______________ CUARTO ______________
                dom: 'Bfrtip',
                buttons: [
                    //'excel',
                    {
                        extend: 'excelHtml5',
                        text: 'Exportar Excel',
                        filename: 'Ubicacion de salones',
                        title: '',
                        className: 'btn btn-success',
                    },
                    //'pdf',
                    {
                        extend: 'pdfHtml5',
                        text: 'Exportar PDF',
                        filename: 'Ubicacion de salones',
                        title: '',
                        className: 'btn btn-danger',
                    },
                    //'print'
                    {
                        extend: 'print',
                        title: '',
                        className:'btn btn-secondary'

                    },
                    //extra
                    {
                        extend: 'pageLength',
                        className:'btn btn-outline-dark'
                    }
                ],
                //______________ QUINTO _______________
                orderCellsTop: true,
                fixedHeader: true,
                initComplete: function () {
                    var api = this.api();

                    // For each column
                    api.columns().eq(0).each(function (colIdx) {

                            // Set the header cell to contain the input element
                            var cell = $('.filters th').eq( $(api.column(colIdx).header()).index() );

                            var title = $(cell).text();

                            //$(cell).html('<input type="text" placeholder="' + title + '" />');
                            $(cell).html('<input type="text" placeholder="Buscar..." />');

                            // On every keypress in this input
                            $('input', $('.filters th').eq($(api.column(colIdx).header()).index()) ).off('keyup change').on('keyup change', function (e) {

                                    e.stopPropagation();

                                    // Get the search value
                                    $(this).attr('title', $(this).val());
                                    var regexr = '({search})'; //$(this).parents('th').find('select').val();

                                    var cursorPosition = this.selectionStart;
                                    // Search the column for that value
                                    api
                                        .column(colIdx)
                                        .search(
                                            this.value != ''
                                                ? regexr.replace('{search}', '(((' + this.value + ')))')
                                                : '',
                                            this.value != '',
                                            this.value == ''
                                        )
                                        .draw();

                                    $(this)
                                        .focus()[0]
                                        .setSelectionRange(cursorPosition, cursorPosition);
                                });
                        });
                },

                //extra
                //searching: false



            });



        } );

    </script>
}